<template>
  <div class="bg-pink-400 mx-auto flex justify-between items-center gap-6">
    <div class="flex items-center justify-center gap-12 ml-6">
      <img src="/1.png" class="h-20 w-30 object-cover mb-2 mt-2" alt="proud">
      <p><a href="/"> ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å </a></p>
      <p><a href="/home"> ‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß </a></p>
    </div>

    <div class="mr-6">
      <template v-if="isLoggedIn">
        <button @click="openProfile" class="text-white"><i class="fa-regular fa-circle-user"></i></button>
      </template>
      <template v-else>
        <NuxtLink to="/login">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</NuxtLink>
      </template>
    </div>

    <!-- ‚úÖ Profile Overlay (‡∏Å‡∏î‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô‡∏Å‡πá‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ) -->
    <div 
      v-if="showProfile" 
      class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center "
      @click.self="closeProfile"
    >
      <div class="bg-white p-6 rounded-lg shadow-lg w-[400px]  absolute top-[500px]">
        <a href="/recording1" class="text-xl font-bold ">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</a>

        <!-- üõ†Ô∏è ‡πÉ‡∏™‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡∏≠‡∏á Overlay ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
        <slot></slot>

        <!-- ‚úÖ ‡∏õ‡∏∏‡πà‡∏° Logout ‡πÉ‡∏ô Overlay -->
        <button @click="logout" class="mt-4 bg-red-500 text-white px-4 py-2 rounded-md w-full">
          ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
        </button>

        <!-- ‚úÖ ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î Overlay -->
        <button @click="closeProfile" class="absolute top-2 right-2 text-gray-600 text-xl">√ó</button>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      isLoggedIn: false,
      showProfile: false
    };
  },
  mounted() {
    this.isLoggedIn = !!localStorage.getItem('user'); // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• user ‡πÉ‡∏ô localStorage ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
  },
  methods: {
    openProfile() {
      this.showProfile = true;
    },
    closeProfile() {
      this.showProfile = false;
    },
    logout() {
      localStorage.removeItem('user'); // ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
      this.isLoggedIn = false;
      this.showProfile = false;
      window.location.reload(); // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Navbar ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏õ‡πá‡∏ô "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö"
    }
  }
};
</script>